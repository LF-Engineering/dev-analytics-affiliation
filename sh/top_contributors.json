{
  "size": 0,
  "query": {
    "bool": {
      "must": {
        "exists": {
          "field": "author_uuid"
        }
      },
      "filter": {
        "range": {
          "grimoire_creation_date": {
            "gte": 570000000000,
            "lte": 2580000000000
          }
        }
      }
    }
  },
  "aggs": {
    "contributions": {
      "terms": {
        "field": "author_uuid",
        "missing": "",
        "size": 1000
      },
      "aggs": {
        "lines_added": {
          "sum": {
            "field": "lines_added"
          }
        },
        "lines_removed": {
          "sum": {
            "field": "lines_removed"
          }
        },
        "lines_changed": {
          "sum": {
            "field": "lines_changed"
          }
        },
        "commits": {
          "cardinality": {
            "field": "hash"
          }
        },
        "gerrit_approvals": {
          "sum": {
            "field": "is_gerrit_approval"
          }
        },
        "gerrit-merged-changesets": {
          "filters": {
            "filters": {
              "merged": {
                "query_string": {
                  "query": "status:\"MERGED\"",
                  "analyze_wildcard": true,
                  "default_field": "*"
                }
              }
            }
          },
          "aggs": {
            "changesets": {
              "sum": {
                "field": "is_gerrit_changeset"
              }
            }
          }
        }
      }
    }
  }
}
